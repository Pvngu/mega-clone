---
import ButtonPrimary from '../components/ButtonPrimary.astro'
import ButtonSecondary from '../components/ButtonSecondary.astro'
import NavButton from '../components/NavButton.astro'

const products = [
    {
        name: 'Cloud storage',
        description: 'Keep your files in a secure place',
        icon: 'cloud'
    },
    {
        name: 'Chat and Meetings',
        description: 'Secure and private conversations',
        icon: 'chat'
    },
    {
        name: 'Sync',
        description: 'Sync your files with MEGA',
        icon: 'sync'
    },
    {
        name: 'Backup',
        description: 'Securely back up your files',
        icon: 'server'
    },
    {
        name: 'Share',
        description: 'Share your files with friends',
        icon: 'share'
    },
    {
        name: 'Media files',
        description: 'Store and organise your media files',
        icon: 'image'
    },
    {
        name: 'Object storage',
        description: 'Fully scalable S3 compatible storage',
        icon: 'data'
    },
    {
        name: 'VPN',
        description: 'Protect your privacy online',
        icon: 'shield'
    },
    
]

const solutions = [
    {
        name: 'Individuals',
        description: 'Personal accounts for everyday use',
        icon: 'smile'   
    },
    {
        name: 'Freelancers',
        description: 'Creatives, contractors, consultants and side hustlers',
        icon: 'video'   
    },
    {
        name: 'Small business',
        description: 'Startups, sole traders, family businesses and online retailers',
        icon: 'group'
    }
]

const help = [
    {
        name: 'Help Centre',
        description: 'FInd extensive MEGA documentation',
        icon: 'help-circle'   
    },
    {
        name: 'Contact us',
        description: 'Do not hesitate to contact us',
        icon: 'message'   
    },
    {
        name: 'Bug Bounty',
        description: 'Report any bugs or issues',
        icon: 'shield'
    }
]

const items = [products, solutions, help]
---
<header class="text-main fixed w-full bg-night top-0">
    <nav>
        <!-- upper -->
        <div id="upper" class="border-b-[1px] border-gray-150">
            <div class="flex justify-between h-[68px] items-center px-6 xl:px-11 max-w-[1320px] m-auto">
                <div class="flex items-center gap-x-16 h-full upperItems">
                    <div class="size-8">
                        <img class="object-cover size-full" src="https://mega.io/wp-content/themes/megapages/megalib/images/megaicon.svg" alt="mega icon">
                    </div>
                    <div class="flex items-center font-inter font-bold gap-x-8 max-lg:hidden h-full">
                        <NavButton idName='productsBtn'>Products</NavButton>
                        <NavButton idName='solutionsBtn'>Solutions</NavButton>
                        <div class="hover:border-b-2 border-red-500">Business</div>
                        <div class="hover:border-b-2 border-red-500">Pricing</div>
                        <NavButton idName='helpBtn'>Help</NavButton>
                    </div>
                </div>
                <div class="flex gap-x-5 font-inter">
                    <div class="flex gap-x-5 max-lg:hidden">
                        <button class="flex items-center gap-x-2 font-bold text-sm"><i class='bx bx-globe text-xl' ></i>EN</button>
                        <button><i class='bx bx-sun text-2xl'></i></button>
                    </div>
                    <div class="flex gap-x-3 max-md:hidden">
                        <a href="/login">
                            <ButtonSecondary>Log in</ButtonSecondary>
                        </a>
                        <a href="/register">
                            <ButtonPrimary>Sign up</ButtonPrimary>
                        </a>
                    </div>
                    <div class="flex justify-center items-center lg:hidden">
                        <i class='bx bx-menu text-2xl'></i>
                    </div>
                </div>
            </div>
        </div>
        <!-- lower -->
        <dialog id="lower" class="bg-[#1f242a] w-full">
            <div class="max-w-[1320px] m-auto px-6 xl:px-11 pt-14 pb-20">
                <!-- Heading -->
                <div class="uppercase font-inter font-bold text-xs text-gray-secondary tracking-widest mb-4">Products</div>
                <!-- List -->
                <div class="hidden navItems">
                    <div class="flex gap-10 flex-wrap">
                    {
                        products.map(product => (
                            <div class="flex gap-x-3 w-[265px]">
                                <div class="size-8 text-main">
                                    <i class=`bx bx-${product.icon} text-3xl`></i>
                                </div>
                                <div class="font-inter">
                                    <div class="text-main">{product.name}</div>
                                    <div class="text-gray-secondary text-sm">{product.description}</div>
                                </div>
                            </div>
                        ))
                    }
                    </div>
                </div>
            </div>
        </dialog>
    </nav>
</header>

<script>
    const dialog = document.querySelector('#lower') as HTMLDialogElement;
    const items = document.querySelectorAll('.navItems') as NodeListOf<HTMLInputElement>;
    const btns = document.querySelectorAll('.navBtns') as NodeListOf<HTMLInputElement>;

    btns.forEach((btn, i) => {
        btn.addEventListener('change', () => {
            if(btn.checked) {
                items[i].classList.remove('hidden')
                dialog.show();
            }
            else dialog.close();
        })
    })
</script>