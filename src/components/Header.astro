---
import ButtonPrimary from '../components/ButtonPrimary.astro'
import ButtonSecondary from '../components/ButtonSecondary.astro'
import NavButton from '../components/NavButton.astro'
import NavContainer from '../components/NavContainer.astro'

const products = [
    {
        name: 'Cloud storage',
        description: 'Keep your files in a secure place',
        icon: 'cloud',
        url: '/storage'
    },
    {
        name: 'Chat and Meetings',
        description: 'Secure and private conversations',
        icon: 'chat',
        url: '/chatandmettings'
    },
    {
        name: 'Sync',
        description: 'Sync your files with MEGA',
        icon: 'sync',
        url: '/syncing'
    },
    {
        name: 'Backup',
        description: 'Securely back up your files',
        icon: 'server',
        url: '/megabackup'
    },
    {
        name: 'Share',
        description: 'Share your files with friends',
        icon: 'share',
        url: ''
    },
    {
        name: 'Media files',
        description: 'Store and organise your media files',
        icon: 'image',
        url: 'media-files'
    },
    {
        name: 'Object storage',
        description: 'Fully scalable S3 compatible storage',
        icon: 'data',
        url: '/objectstorage'
    },
    {
        name: 'VPN',
        description: 'Protect your privacy online',
        icon: 'shield',
        url: '/vpn'
    },
    
]

const solutions = [
    {
        name: 'Individuals',
        description: 'Personal accounts for everyday use',
        icon: 'smile',
        url: '/individuals' 
    },
    {
        name: 'Freelancers',
        description: 'Creatives, contractors, consultants and side hustlers',
        icon: 'video',
        url: '/freelancers' 
    },
    {
        name: 'Small business',
        description: 'Startups, sole traders, family businesses and online retailers',
        icon: 'group',
        url: '/small-business'
    }
]

const help = [
    {
        name: 'Help Centre',
        description: 'FInd extensive MEGA documentation',
        icon: 'help-circle',
        url: '#'
    },
    {
        name: 'Contact us',
        description: 'Do not hesitate to contact us',
        icon: 'message',
        url: '/contact'
    },
    {
        name: 'Bug Bounty',
        description: 'Report any bugs or issues',
        icon: 'shield',
        url: '/bug-bounty'
    }
]
---
<header class="text-main fixed w-full bg-night top-0">
    <nav>
        <!-- upper -->
        <div id="upper" class="border-b-[1px] border-gray-150">
            <div class="flex justify-between h-[68px] items-center px-6 xl:px-11 max-w-[1320px] m-auto">
                <div class="flex items-center gap-x-16 h-full upperItems">
                    <div class="size-8">
                        <img class="object-cover size-full" src="https://mega.io/wp-content/themes/megapages/megalib/images/megaicon.svg" alt="mega icon">
                    </div>
                    <div class="flex items-center font-inter font-bold gap-x-8 max-lg:hidden h-full">
                        <NavButton idName='productsBtn'>Products</NavButton>
                        <NavButton idName='solutionsBtn'>Solutions</NavButton>
                        <div class="hover:border-b-2 border-red-500">Business</div>
                        <div class="hover:border-b-2 border-red-500">Pricing</div>
                        <NavButton idName='helpBtn'>Help</NavButton>
                    </div>
                </div>
                <div class="flex gap-x-5 font-inter">
                    <div class="flex gap-x-5 max-lg:hidden">
                        <button class="flex items-center gap-x-2 font-bold text-sm"><i class='bx bx-globe text-xl' ></i>EN</button>
                        <button><i class='bx bx-sun text-2xl'></i></button>
                    </div>
                    <div class="flex gap-x-3 max-md:hidden">
                        <a href="/login">
                            <ButtonSecondary>Log in</ButtonSecondary>
                        </a>
                        <a href="/register">
                            <ButtonPrimary>Sign up</ButtonPrimary>
                        </a>
                    </div>
                    <div class="flex justify-center items-center lg:hidden">
                        <i class='bx bx-menu text-2xl'></i>
                    </div>
                </div>
            </div>
        </div>
        <!-- lower -->
        <dialog id="lower" class="bg-[#1f242a] w-full">
            <div class="max-w-[1320px] m-auto px-6 xl:px-11 pt-14 pb-[4.1rem]">
                <NavContainer name='products'>
                    {
                        products.map(item => (
                            <a href={item.url} class="group">
                                <div class="flex gap-x-3 w-[265px]">
                                    <div class="size-8 text-main group-hover:text-mega-red">
                                        <i class=`bx bx-${item.icon} text-3xl`></i>
                                    </div>
                                    <div class="font-inter">
                                        <div class="text-main group-hover:text-mega-red">{item.name}</div>
                                        <div class="text-gray-secondary text-sm">{item.description}</div>
                                    </div>
                                </div>
                            </a>
                        ))
                    }
                </NavContainer>
                <NavContainer name='solutions'>
                    {
                        solutions.map(item => (
                            <a href={item.url}>
                                <div class="flex gap-x-3 w-[265px]">
                                    <div class="size-8 text-main">
                                        <i class=`bx bx-${item.icon} text-3xl`></i>
                                    </div>
                                    <div class="font-inter">
                                        <div class="text-main">{item.name}</div>
                                        <div class="text-gray-secondary text-sm">{item.description}</div>
                                    </div>
                                </div>
                            </a>
                        ))
                    }
                </NavContainer>
                <NavContainer>
                    {
                        help.map(item => (
                            <a href={item.url}>
                                <div class="flex gap-x-3 w-[265px]">
                                    <div class="size-8 text-main">
                                        <i class=`bx bx-${item.icon} text-3xl`></i>
                                    </div>
                                    <div class="font-inter">
                                        <div class="text-main">{item.name}</div>
                                        <div class="text-gray-secondary text-sm">{item.description}</div>
                                    </div>
                                </div>
                            </a>
                        ))
                    }
                </NavContainer>
            </div>
        </dialog>
    </nav>
</header>

<script>
const dialog = document.querySelector('#lower') as HTMLDialogElement;
const items = document.querySelectorAll('.navItems') as NodeListOf<HTMLInputElement>;
const btns = document.querySelectorAll('.navBtns') as NodeListOf<HTMLInputElement>;

btns.forEach((btn, i) => {
    btn.addEventListener('change', () => {
        if(btn.checked) {
            items[i].classList.remove('hidden');
            dialog.show();
            
            btns.forEach((otherBtn, j) => {
                if (j !== i) {
                    otherBtn.checked = false;
                    items[j].classList.add('hidden');
                }
            });
        }
        else {
            btn.classList.remove('active');
            items[i].classList.add('hidden');
            dialog.close();
        }
    });
});
</script>